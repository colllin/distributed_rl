{
    "builders":
    [
        {
            "type": "amazon-ebs",
            "ami_name": "distributed_rl",
            "region": "us-west-2",
            "source_ami": "ami-0231c1de0d92fe7a2",
            "instance_type": "p2.xlarge",
            "ssh_username": "ubuntu"
        }
    ],
    "provisioners":
    [
        {
            "type": "shell",
            "inline":
	    [
		"i='0'; while [ $i -lt 15 ]; do if [ $(fuser /var/lib/dpkg/lock) ]; then i='0'; fi; sleep 1; i=$[$i+1]; done",
		"sudo apt-get -y update",
		"sudo apt-get -y install git redis-server",
		"pip install torch gym redis pillow atari-py visdom numpy",
		"git clone https://github.com/neka-nat/distributed_rl.git"
	    ]
        }
    ]
}
